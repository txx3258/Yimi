<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="http://192.168.11.149:8880/api/Chart.min.js"></script>
    <script type="text/javascript" src="http://192.168.11.149:8880/api/jquery-2.2.0.min.js"></script>
</head>
<body>
  <div id="desc" style="height:50px;left:200px;position:fixed"> 
    <form id="queryCond"> 
    <select id="biz_type" name="biz_type" style="float:left"> 
      <option value="gc">gc</option>
      <option value="perf">perf</option>
      <option value="memcached">memcached</option>
    </select>

     <select id="biz_collections" name="biz_collections" style="float:left;margin-left:15px">
      <option value="gc_applists">gc_applists</option>
    </select>
    
    <select id="biz_code" name="biz_code" style="float:left;margin-left:15px">
      <option value="gc_applists">gc_applists</option>
    </select>
    
    <select id="select_date" name="select_date" style="float:left;margin-left:105px">
      <option value="">日期选择</option>
    </select>

    <select id="select_count" name="select_count" style="float:left;margin-left:15px">
      <option value="">数量</option>
      <option value="10">10</option>
      <option value="30">30</option>
      <option value="50">50</option>
      <option value="100">100</option>
      <option value="1000">1000</option> 
    </select>
    </form>
  </div>
    <div id="left" style="position:fixed;top:180px;left:10px">left(ms)</div>
    <canvas id="myChart" width="5000" height="600" style="margin-left:40px;margin-top:60px"></canvas>
    <div id="right" style="height:80px;left:600px;position:fixed">2015-09-21</div>
    <script type="text/javascript">
      var myChart=document.getElementById("myChart");
      var ctx=myChart.getContext("2d");
        var qsData={collectName:"perf_applists",queryName:'{}'};
        var options={
            ///Boolean - Whether grid lines are shown across the chart
            scaleShowGridLines : true,
            //String - Colour of the grid lines
            scaleGridLineColor : "rgba(0,0,0,.05)",
            //Number - Width of the grid lines
            scaleGridLineWidth : 1,
            //Boolean - Whether to show horizontal lines (except X axis)
            scaleShowHorizontalLines: true,
            //Boolean - Whether to show vertical lines (except Y axis)
            scaleShowVerticalLines: true,
            //Boolean - Whether the line is curved between points
            bezierCurve : true,
            //Number - Tension of the bezier curve between points
            bezierCurveTension : 0.4,
            //Boolean - Whether to show a dot for each point
            pointDot : true,
            //Number - Radius of each point dot in pixels
            pointDotRadius : 4,
            //Number - Pixel width of point dot stroke
            pointDotStrokeWidth : 1,
            //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
            pointHitDetectionRadius : 20,
            //Boolean - Whether to show a stroke for datasets
            datasetStroke : true,
            //Number - Pixel width of dataset stroke
            datasetStrokeWidth : 2,
            //Boolean - Whether to fill the dataset with a colour
            datasetFill : true,
            //String - A legend template
            legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:red\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>"

        };

        $.ajax({
            async:false,
            url: '/api/chart',
            type: "GET",
            dataType: 'json',
            data: qsData,
            success: function (json) {
                myChart.width=json.width;
                myChart.height=json.height;
                var myLineChart = new Chart(ctx).Line(json, options);
            },
            error: function(xhr){ }
        });

        function wrapDate(){
          var date=new Date(),year=date.getFullYear(),
            month=date.getMonth()+1,day=date.getDate();
            month=month>=10?month:'0'+month;
        
          var dateStr=year+"-"+month+"-",opts=[];
          for(var i=0;i<5;i++){
            var tmp=day-0;
            tmp=tmp>=0?tmp:'0'+tmp;
            opts.push('<option value="'+dateStr+'">'+dateStr+'</option>');
          }

          $("#select_date").append(opts.join(','));
        }
    </script>
</body>
</html>
